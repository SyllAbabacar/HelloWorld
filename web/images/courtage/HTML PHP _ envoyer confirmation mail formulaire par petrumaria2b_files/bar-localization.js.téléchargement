var dictionary = {
    de: {
		alternative_price: 'Alternativer Preis:',
		prices: 'Preise',
		price: 'Preis',
		compare: 'vergleichen',
		at: 'auf',
		save: 'Spare',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Angebote und Gutscheine anzeigen',
		weFoundCoupons: 'Es stehen Gutscheine zur Verfügung!'
	},
	en: {
		alternative_price: 'Alternative price:',
		prices: 'prices',
		price: 'price',
		compare: 'Compare',
		at: 'at',
		save: 'Save',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Show coupons and offers',
		weFoundCoupons: 'We have found coupons for this webpage!'
	},
	es: {
		alternative_price: 'Precio alternativo:',
		prices: 'precios',
		price: 'precio',
		compare: 'Comparar',
		at: 'en',
		save: 'Ahorra',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Mostrar cupones y ofertas',
		weFoundCoupons: '¡Hemos encontrado cupones para este sitio!'
	},
	pt: {
		alternative_price: 'Preço alternativo:',
		prices: 'preços',
		price: 'preço',
		compare: 'Comparar',
		at: 'na loja',
		save: 'Economize',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Mostrar cupons e ofertas!',
		weFoundCoupons: 'Encontramos cupons para este site!'
	},
	fr: {
		alternative_price: 'Prix alternatif:',
		prices: 'Prix',
		price: 'Prix',
		compare: 'Comparer',
		at: 'sur',
		save: 'Économisez',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Afficher Coupons et Offres',
		weFoundCoupons: 'Nous avons trouvé des bons de réduction pour ce site!'
	},
	it: {
		alternative_price: 'Prezzo alternativo:',
		prices: 'prezzi',
		price: 'prezzo',
		compare: 'Compara',
		at: 'su',
		save: 'Risparmia',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Mostra buoni sconto e offerte',
		weFoundCoupons: 'Abbiamo trovato dei coupon per questo sito!'
	},
	pl: {
		alternative_price: 'Cena alternatywna:',
		prices: 'cen',
		price: 'cena',
		compare: 'Porównania',
		at: 'w',
		save: 'Oszczędź',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Pokaż oferty i kupony',
		weFoundCoupons: 'Znaleźliśmy kupony dla tej strony!'
	},
	ru: {
		alternative_price: 'AАльтернативная цена',
		prices: 'цены',
		price: 'цену',
		compare: 'Сравнить',
		at: 'на',
		save: 'Сэкономьте',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Показать купоны и спецпредложения',
		weFoundCoupons: 'Мы нашли купоны для этой веб-страницы!'
	},
	nl: {
		alternative_price: 'Alternatieve prijs:',
		prices: 'prijzen',
		price: 'prijs',
		compare: 'vergelijken',
		at: 'op',
		save: 'Bespaar',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Aanbiedingen en coupons tonen',
		weFoundCoupons: 'We hebben coupons voor deze website gevonden!'
	},
	no: {
		alternative_price: 'Alternative price:',
		prices: 'prices',
		price: 'price',
		compare: 'Compare',
		at: 'at',
		save: 'Save',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Show coupons and offers',
		weFoundCoupons: 'We have found coupons for this webpage!'
	},
	sv: {
		alternative_price: 'Alternative price:',
		prices: 'prices',
		price: 'price',
		compare: 'Compare',
		at: 'at',
		save: 'Save',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Show coupons and offers',
		weFoundCoupons: 'We have found coupons for this webpage!'
	},
	tr: {
		alternative_price: 'Alternative price:',
		prices: 'prices',
		price: 'price',
		compare: 'Compare',
		at: 'at',
		save: 'Save',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Show coupons and offers',
		weFoundCoupons: 'We have found coupons for this webpage!'

	},
	fi: {
		alternative_price: 'Alternative price:',
		prices: 'prices',
		price: 'price',
		compare: 'Compare',
		at: 'at',
		save: 'Save',
		powered_by: 'Ad by',
		show_coupons_and_offers: 'Show coupons and offers',
		weFoundCoupons: 'We have found coupons for this webpage!'
	}
};


var storage = {
    get: function(key, defaultValue) {
        if (localStorage[key]) {
            try {
                return JSON.parse(localStorage[key]);
            } catch (ex) {
            }
        }
        if (defaultValue === undefined) {
            return null;
        }
        return defaultValue;
    },
    set: function(key, newValue) {
        localStorage[key] = JSON.stringify(newValue);
    },
    remove: function(key) {
        if (localStorage[key]) {
            delete localStorage[key];
        }
    }
};

var language = (function() {
    var detectedLanguage = storage.get('detectedLanguageV2', null);

    if (detectedLanguage) {
        return detectedLanguage;
    }

    detectedLanguage = 'en';

    // list from http://msdn.microsoft.com/en-us/library/windows/apps/jj657969.aspx
    var supportedLanguages = {
        de: ['de', 'de-de', 'de-ch', 'de-at', 'de-lu', 'de-li'],
        es: ['es', 'es-es', 'es-ar', 'es-bo', 'es-cl', 'es-co', 'es-cr', 'es-do', 'es-ec', 'es-gt', 'es-hn', 'es-mx', 'es-ni', 'es-pa', 'es-pe', 'es-pr', 'es-py', 'es-sv', 'es-uy', 'es-ve'],
        fr: ['fr', 'fr-fr', 'fr-be', 'fr-ca', 'fr-ch', 'fr-lu'],
        it: ['it', 'it-it', 'it-ch'],
        pt: ['pt', 'pt-br', 'pt-pt'],
        ru: ['ru', 'ru-ru'],
        pl: ['pl', 'pl-pl'],
        nl: ['nl', 'nl-nl', 'nl-be'],
        no: ['nb', 'nb-no', 'nn', 'nn-no', 'no', 'no-no'],
        sv: ['sv', 'sv-se', 'sv-fi'],
        tr: ['tr', 'tr-tr']
    };

    var navigatorLanguage = ((navigator.language) ? navigator.language : navigator.userLanguage).toLowerCase();
    for (var languageCode in supportedLanguages) {
        if (supportedLanguages[languageCode].indexOf(navigatorLanguage) > -1) {
            detectedLanguage = languageCode;
            break;
        }
    }

    storage.set('detectedLanguageV2', detectedLanguage);
    return detectedLanguage;
})();

var userLanguage = dictionary[language];
